{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'config:recommended',
  ],
  packageRules: [
    {
      // Auto-merge patch updates
      matchUpdateTypes: ['patch'],
      automerge: true,
      automergeType: 'pr',
      automergeStrategy: 'squash',
    },
    {
      // When terraform-provider-grafana is updated, run make submodules and make generate
      matchPackageNames: ['github.com/grafana/terraform-provider-grafana/v4'],
      postUpgradeTasks: {
        commands: [
          'make submodules',
          'make generate',
        ],
        fileFilters: ['**/*'],
        executionMode: 'branch',
      },
    },
  ],
}
